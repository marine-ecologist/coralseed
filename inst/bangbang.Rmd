---
title: "Tidy eval tools and dynamic functions"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# passing a dynamic vector to dplyr 

Example passing a dynamic vector in an argument e.g. group_by="island" will fail with `Column factor is not found.`: 


```{r}

library(palmerpenguins)

factor="island"

penguins |> group_by(factor) |> summarise(across(where(is.numeric), mean))

```


fix this using `rlang::sym()` 


> Symbols are a kind of defused expression that represent objects in environments.
> sym() and syms() take strings as input and turn them into symbols.

the bang bang !! operator "injects a value or expression inside another expression" - see help("!!") for exqmples:

```{r}

factor="island"

penguins |> group_by(!!sym(factor)) |> summarise(across(where(is.numeric), mean))

```

to pass multiple columns as a vector use `rlang::syms()` and !!!


```{r}

factor=c("island", "species")

penguins |> group_by(!!!syms(factor)) |> summarise(across(where(is.numeric), mean))

```


to pass a character e.g. "POLYGON" it's more straightforward:


```{r}

library(sf)

characterstr <- "POLYGON"

nc |> st_cast(characterstr)

```
