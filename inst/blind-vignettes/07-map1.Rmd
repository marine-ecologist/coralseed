---
title: "mermaid"
#author: "George Roff"
#date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{mermaid}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r mapoutput, echo=FALSE, message=FALSE, warning=FALSE, fig.width=10, fig.height=10, fig.align = 'center'}

#devtools::install_github("marine-ecologist/coralseed",  lib = "/Users/rof011/coralseed")
#devtools::document("/Users/rof011/coralseed")

devtools::load_all("/Users/rof011/coralseed")
library(ggplot2)
library(tidyverse)
library(sf)
library(tmap)
library(widgetframe)

seascape <- seascape_probability(reefoutline=reef_map, habitat=benthic_map)

particles <- seed_particles(example="mermaid", seascape=seascape,
                            limit_time=6.95, competency.function = "exponential", 
                            limit.time = 720, simulate.mortality = "typeI", 
                            simulate.mortality.n = 0.1, probability="additive",
                            return.plot=FALSE, silent=TRUE)

settlers <-  settle_particles(particles, probability="additive", silent=TRUE)

map_output <- map_coralseed(seed_particles=particles, settle_particles=settlers, 
              seascape_probability=seascape, restoration.plot=c(100,100)) 

map_output

```
